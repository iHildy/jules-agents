# Jules Agents Extension TODO

## Features

### High Priority
- [x] **Detailed Plan Viewer**
    - Implement a drill-down view for plans generated by the agent.
    - Show individual `PlanStep` titles and descriptions with index numbers.
    - Add "View Plan" action to `PlanGenerated` activity items.
    - Consider inline expansion in activity list vs. push navigation.

- [ ] **Enhanced Menu Bar Actions**
    - Add "Approve Plan" action directly to Menu Bar items when session is `AWAITING_PLAN_APPROVAL`.
    - Add "Send Quick Message" option to running sessions.
    - Show plan step count in tooltip for planning sessions.

- [ ] **Branch Dropdown in Launch Session**
    - Replace free-text branch input with a dropdown populated from `GitHubRepo.branches[]`.
    - Use `defaultBranch` as the pre-selected option.
    - Fallback to text input if branches list is empty.

- [ ] **System Notifications**
    - Trigger macOS system notifications when sessions change state to `AWAITING_PLAN_APPROVAL`, `COMPLETED`, or `FAILED`.
    - Use `showHUD` for quick feedback on actions (approve, send message).
    - Consider preference to enable/disable notifications.

### Medium Priority
- [ ] **Activity Filtering**
    - Add filter dropdown to Activity Feed (e.g., "All", "Messages Only", "Artifacts Only", "Hide Progress Updates").
    - Persist filter preference per session or globally.
    - Activity types: `agentMessaged`, `userMessaged`, `planGenerated`, `planApproved`, `progressUpdated`, `changeSet`, `media`, `bashOutput`.

- [ ] **Improved Patch/Code Viewing**
    - Create a dedicated detail view for `changeSet` artifacts.
    - Add "Copy Patch" and "Copy Commit Message" actions.
    - Show `baseCommitId` and `suggestedCommitMessage` in metadata.

- [ ] **Source Explorer Command**
    - Create new `list-sources` command to browse available Jules sources.
    - Show repo name, owner, private status, and branch count.
    - Actions: "Open in GitHub", "Launch Session with Source", "Copy Source Name".

- [ ] **Session Polling/Auto-Refresh**
    - Use `useSession(sessionId)` hook for real-time detail view updates.
    - Add configurable auto-refresh toggle in preferences.
    - Show "Last updated: X seconds ago" indicator.

### Nice to Have
- [ ] **View Media Artifacts**
    - Create dedicated grid view for media produced during a session.
    - Support image preview for common MIME types.
    - Add "Save to Downloads" action.

- [ ] **Copy Actions Expansion**
    - Add "Copy Prompt" action to session items.
    - Add "Copy Plan as Markdown" for plan steps.
    - Add "Copy Activity Log" for full session history.

- [ ] **Fuzzy Search Enhancement**
    - Enable search across prompt content, not just title.
    - Add search keywords for status (e.g., typing "failed" finds failed sessions).

- [ ] **AI-Powered Features** *(Requires Raycast Pro)*
    - "Summarize Session" — use Raycast AI to summarize activity log.
    - "Improve Prompt" — AI-assisted prompt refinement before launch.

## Refinements

- [ ] **UI: Last Activity Summary**
    - Show most recent activity type and timestamp in `SessionDetail` metadata.
    - Example: "Last Activity: Progress Update — 2 min ago".

- [ ] **UI: PR Status Badge**
    - For sessions with `SessionOutput.pullRequest`, show a badge/icon indicating PR exists.
    - Consider fetching PR status via GitHub API (open/merged/closed) as future enhancement.

- [ ] **UI: Bash Output Viewer**
    - Improve display of `bashOutput` artifacts with syntax highlighting.
    - Show exit code with color (green for 0, red for non-zero).

- [ ] **Preferences: Default Activity Filter**
    - Add preference to set default activity filter (e.g., always hide `progressUpdated`).

- [ ] **Preferences: Auto-Refresh Interval**
    - Allow users to configure menu bar refresh interval (currently hardcoded to 5s).
    - Options: 5s, 15s, 30s, 60s, Manual.
